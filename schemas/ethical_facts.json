{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://ahb-sjsu.github.io/erisml-lib/schemas/ethical_facts.json",
  "title": "EthicalFacts",
  "type": "object",
  "description": "Ethically relevant facts for a single candidate option. Constructed by domain and assessment layers, consumed by ethics-only modules.",
  "properties": {
    "option_id": {
      "type": "string"
    },
    "consequences": {
      "type": "object",
      "properties": {
        "expected_benefit": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 1.0
        },
        "expected_harm": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 1.0
        },
        "urgency": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 1.0
        },
        "affected_count": {
          "type": "integer",
          "minimum": 0
        }
      },
      "required": [
        "expected_benefit",
        "expected_harm",
        "urgency",
        "affected_count"
      ],
      "additionalProperties": false
    },
    "rights_and_duties": {
      "type": "object",
      "properties": {
        "violates_rights": {
          "type": "boolean"
        },
        "has_valid_consent": {
          "type": "boolean"
        },
        "violates_explicit_rule": {
          "type": "boolean"
        },
        "role_duty_conflict": {
          "type": "boolean"
        }
      },
      "required": [
        "violates_rights",
        "has_valid_consent",
        "violates_explicit_rule",
        "role_duty_conflict"
      ],
      "additionalProperties": false
    },
    "justice_and_fairness": {
      "type": "object",
      "properties": {
        "discriminates_on_protected_attr": {
          "type": "boolean"
        },
        "prioritizes_most_disadvantaged": {
          "type": "boolean"
        },
        "distributive_pattern": {
          "type": [
            "string",
            "null"
          ]
        },
        "exploits_vulnerable_population": {
          "type": "boolean"
        },
        "exacerbates_power_imbalance": {
          "type": "boolean"
        }
      },
      "required": [
        "discriminates_on_protected_attr",
        "prioritizes_most_disadvantaged",
        "exploits_vulnerable_population",
        "exacerbates_power_imbalance"
      ],
      "additionalProperties": false
    },
    "autonomy_and_agency": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "has_meaningful_choice": {
              "type": "boolean"
            },
            "coercion_or_undue_influence": {
              "type": "boolean"
            },
            "can_withdraw_without_penalty": {
              "type": "boolean"
            },
            "manipulative_design_present": {
              "type": "boolean"
            }
          },
          "required": [
            "has_meaningful_choice",
            "coercion_or_undue_influence",
            "can_withdraw_without_penalty",
            "manipulative_design_present"
          ],
          "additionalProperties": false
        },
        {
          "type": "null"
        }
      ]
    },
    "privacy_and_data": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "privacy_invasion_level": {
              "type": "number",
              "minimum": 0.0,
              "maximum": 1.0
            },
            "data_minimization_respected": {
              "type": "boolean"
            },
            "secondary_use_without_consent": {
              "type": "boolean"
            },
            "data_retention_excessive": {
              "type": "boolean"
            },
            "reidentification_risk": {
              "type": "number",
              "minimum": 0.0,
              "maximum": 1.0
            }
          },
          "required": [
            "privacy_invasion_level",
            "data_minimization_respected",
            "secondary_use_without_consent",
            "data_retention_excessive",
            "reidentification_risk"
          ],
          "additionalProperties": false
        },
        {
          "type": "null"
        }
      ]
    },
    "societal_and_environmental": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "environmental_harm": {
              "type": "number",
              "minimum": 0.0,
              "maximum": 1.0
            },
            "long_term_societal_risk": {
              "type": "number",
              "minimum": 0.0,
              "maximum": 1.0
            },
            "benefits_to_future_generations": {
              "type": "number",
              "minimum": 0.0,
              "maximum": 1.0
            },
            "burden_on_vulnerable_groups": {
              "type": "number",
              "minimum": 0.0,
              "maximum": 1.0
            }
          },
          "required": [
            "environmental_harm",
            "long_term_societal_risk",
            "benefits_to_future_generations",
            "burden_on_vulnerable_groups"
          ],
          "additionalProperties": false
        },
        {
          "type": "null"
        }
      ]
    },
    "virtue_and_care": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "expresses_compassion": {
              "type": "boolean"
            },
            "betrays_trust": {
              "type": "boolean"
            },
            "respects_person_as_end": {
              "type": "boolean"
            }
          },
          "required": [
            "expresses_compassion",
            "betrays_trust",
            "respects_person_as_end"
          ],
          "additionalProperties": false
        },
        {
          "type": "null"
        }
      ]
    },
    "procedural_and_legitimacy": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "followed_approved_procedure": {
              "type": "boolean"
            },
            "stakeholders_consulted": {
              "type": "boolean"
            },
            "decision_explainable_to_public": {
              "type": "boolean"
            },
            "contestation_available": {
              "type": "boolean"
            }
          },
          "required": [
            "followed_approved_procedure",
            "stakeholders_consulted",
            "decision_explainable_to_public",
            "contestation_available"
          ],
          "additionalProperties": false
        },
        {
          "type": "null"
        }
      ]
    },
    "epistemic_status": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "uncertainty_level": {
              "type": "number",
              "minimum": 0.0,
              "maximum": 1.0
            },
            "evidence_quality": {
              "type": "string",
              "enum": [
                "low",
                "medium",
                "high"
              ]
            },
            "novel_situation_flag": {
              "type": "boolean"
            }
          },
          "required": [
            "uncertainty_level",
            "evidence_quality",
            "novel_situation_flag"
          ],
          "additionalProperties": false
        },
        {
          "type": "null"
        }
      ]
    },
    "tags": {
      "type": [
        "array",
        "null"
      ],
      "items": {
        "type": "string"
      }
    },
    "extra": {
      "type": [
        "object",
        "null"
      ],
      "additionalProperties": true
    }
  },
  "required": [
    "option_id",
    "consequences",
    "rights_and_duties",
    "justice_and_fairness"
  ],
  "additionalProperties": false
}